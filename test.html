<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Lecteur SWF Dynamique</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 20px;
            }
            .menu {
                margin-bottom: 20px;
            }
            .menu a {
                margin-right: 10px;
                cursor: pointer;
                color: blue;
                text-decoration: underline;
            }
            #ruffle {
                margin-top: 20px;
            }
        </style>
    </head>
    <body>
        <h1>Lecteur SWF Dynamique avec Ruffle</h1>
        <div class="menu">
            <!-- Liens pour les dossiers -->
            <a onclick="loadSWFs('dossier 1')">Dossier 1</a>
            <a onclick="loadSWFs('dossier 2')">Dossier 2</a>
        </div>
        <div id="swfList">
            <!-- Liste dynamique des fichiers SWF -->
        </div>
        <div id="ruffle">
            <!-- Le lecteur Ruffle sera injecté ici -->
        </div>

        <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
        <script>
            // Configuration des fichiers par dossier
            const swfFiles = {
                "dossier 1": ["1.swf", "2.swf"],
                "dossier 2": ["Epe1.swf"]
            };

            // Fonction pour charger les fichiers SWF d'un dossier
            function loadSWFs(dossier) {
                const swfListContainer = document.getElementById("swfList");
                const ruffleContainer = document.getElementById("ruffle");
                
                // Efface le contenu actuel
                swfListContainer.innerHTML = "";
                ruffleContainer.innerHTML = "";

                if (swfFiles[dossier]) {
                    // Affiche la liste des fichiers SWF disponibles
                    swfFiles[dossier].forEach(file => {
                        const link = document.createElement("a");
                        link.href = "#";
                        link.textContent = file;
                        link.style.display = "block";
                        link.onclick = () => loadRufflePlayer(`${dossier}/${file}`);
                        swfListContainer.appendChild(link);
                    });
                } else {
                    swfListContainer.innerHTML = "<p>Aucun fichier SWF trouvé pour ce dossier.</p>";
                }
            }

            // Fonction pour charger un fichier SWF avec Ruffle
            function loadRufflePlayer(filePath) {
                const ruffleContainer = document.getElementById("ruffle");
                ruffleContainer.innerHTML = ""; // Efface l'ancien contenu

                // Crée un lecteur Ruffle
                window.RufflePlayer = window.RufflePlayer || {};
                const ruffle = window.RufflePlayer.newest();
                const player = ruffle.createPlayer();
                ruffleContainer.appendChild(player);

                // Charge le fichier SWF sélectionné
                player.load(filePath);
            }
        </script>
    </body>
</html>
